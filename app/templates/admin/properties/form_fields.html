<!-- Agent and Client Assignment -->
<div class="form-section">
    <div class="form-header">Client & Agent Assignment</div>
    <div class="form-grid">
        <div class="form-group">
            <label class="form-label">Select Agent</label>
            <select name="agent_id" required class="form-select">
                <option value="">Choose an agent</option>
                {% for agent in agents %}
                <option value="{{ agent.agent_id }}" 
                        {% if property.agent_id == agent.agent_id %}selected{% endif %}>
                    {{ agent.agent_name }} ({{ agent.agent_phone }})
                </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Select Client (Seller)</label>
            <select name="client_id" required class="form-select">
                <option value="">Choose a client</option>
                {% for client in clients %}
                <option value="{{ client.client_id }}"
                        {% if property.client_id == client.client_id %}selected{% endif %}>
                    {{ client.client_name }} ({{ client.client_phone }})
                </option>
                {% endfor %}
            </select>
        </div>
    </div>
</div>

<!-- Basic Property Information -->
<div class="form-section">
    <div class="form-header">Property Details</div>
    <div class="form-grid">
        <div class="form-group">
            <label>Tax ID</label>
            <input type="text" name="tax_id" required placeholder="Tax ID" 
                   value="{{ property.tax_id|default('') }}">
        </div>

        <div class="form-group">
            <label>Address</label>
            <input type="text" name="property_address" required placeholder="Address"
                   value="{{ property.property_address|default('') }}">
        </div>
        
        <div class="form-group">
            <label>Price</label>
            <input type="number" name="price" required min="0" step="0.01" placeholder="Enter property price"
                   value="{{ property.price|default('') }}">
            <small class="help-text">Enter price in dollars</small>
        </div>

        <div class="form-group">
            <label>Status</label>
            <select name="status" required class="form-select">
                <option value="">Select status</option>
                {% for status in ['For Sale', 'For Lease', 'Sold', 'Leased'] %}
                    <option value="{{ status }}" 
                            {% if property.status == status %}selected{% endif %}>
                        {{ status }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label>Property Type</label>
            <select name="property_type" required id="propertyType" onchange="togglePropertyTypeFields()">
                <option value="">Select Property Type</option>
                <option value="RESIDENTIAL" {% if property.property_type == 'RESIDENTIAL' %}selected{% endif %}>Residential</option>
                <option value="COMMERCIAL" {% if property.property_type == 'COMMERCIAL' %}selected{% endif %}>Commercial</option>
            </select>
        </div>
    </div>
</div>

<!-- Residential Fields -->
<div id="residentialFields" class="form-section {% if not property.property_type or property.property_type != 'RESIDENTIAL' %}hidden{% endif %}">
    <div class="form-header">Residential Details</div>
    <div class="form-grid">
        <div class="form-group">
            <label>Bedrooms</label>
            <input type="number" name="bedrooms" min="0" placeholder="Number of Bedrooms"
                   value="{{ property.bedrooms|default('') }}">
        </div>
        <div class="form-group">
            <label>Bathrooms</label>
            <input type="number" name="bathrooms" min="0" step="0.5" placeholder="Number of Bathrooms"
                   value="{{ property.bathrooms|default('') }}">
        </div>
        <div class="form-group">
            <label>Residential Type</label>
            <input type="text" name="r_type" placeholder="Residential Type"
                   value="{{ property.r_type|default('') }}">
        </div>
        <div class="form-group">
            <label>Square Feet</label>
            <input type="number" name="square_feet" min="0" placeholder="Square Feet"
                   value="{{ property.square_feet|default('') }}">
        </div>
        <div class="form-group">
            <label>Garage Spaces</label>
            <input type="number" name="garage_spaces" min="0" placeholder="Garage Spaces"
                   value="{{ property.garage_spaces|default('') }}">
        </div>
        <div class="form-group">
            <label>Has Basement?</label>
            <input type="checkbox" name="has_basement" 
                   {% if property.has_basement %}checked{% endif %}>
        </div>
        <div class="form-group">
            <label>Has Pool?</label>
            <input type="checkbox" name="has_pool"
                   {% if property.has_pool %}checked{% endif %}>
        </div>
    </div>
</div>

<!-- Commercial Fields -->
<div id="commercialFields" class="form-section {% if not property.property_type or property.property_type != 'COMMERCIAL' %}hidden{% endif %}">
    <div class="form-header">Commercial Details</div>
    <div class="form-grid">
        <div class="form-group">
            <label>Square Feet</label>
            <input type="number" name="sqft" min="0" placeholder="Square Feet"
                   value="{{ property.sqft|default('') }}">
        </div>
        <div class="form-group">
            <label>Industry</label>
            <input type="text" name="industry" placeholder="Industry"
                   value="{{ property.industry|default('') }}">
        </div>
        <div class="form-group">
            <label>Commercial Type</label>
            <input type="text" name="c_type" placeholder="Commercial Type"
                   value="{{ property.c_type|default('') }}">
        </div>
        <div class="form-group">
            <label>Number of Units</label>
            <input type="number" name="num_units" min="0" placeholder="Number of Units"
                   value="{{ property.num_units|default('') }}">
        </div>
        <div class="form-group">
            <label>Parking Spaces</label>
            <input type="number" name="parking_spaces" min="0" placeholder="Parking Spaces"
                   value="{{ property.parking_spaces|default('') }}">
        </div>
        <div class="form-group">
            <label>Zoning Type</label>
            <input type="text" name="zoning_type" placeholder="Zoning Type"
                   value="{{ property.zoning_type|default('') }}">
        </div>
    </div>
</div>
