<!-- Agent and Client Assignment -->
<div class="form-section">
    <div class="form-header">Client & Agent Assignment</div>
    <div class="form-grid">
        <div class="form-group">
            <label class="form-label">Select Agent</label>
            <select name="agent_id" required class="form-select">
                <option value="">Choose an agent</option>
                {% for agent in agents %}
                <option value="{{ agent.agent_id }}">
                    {{ agent.agent_name }} ({{ agent.agent_phone }})
                </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Select Client (Seller)</label>
            <select name="client_id" required class="form-select">
                <option value="">Choose a client</option>
                {% for client in clients %}
                <option value="{{ client.client_id }}">
                    {{ client.client_name }} ({{ client.client_phone }})
                </option>
                {% endfor %}
            </select>
        </div>
    </div>
</div>

<!-- Basic Property Information -->
<div class="form-section">
    <div class="form-header">Property Details</div>
    <div class="form-grid">
        <div class="form-group">
            <label>Property Name</label>
            <input type="text" name="property_name" required placeholder="Property Name">
        </div>

        <div class="form-group">
            <label>Tax ID</label>
            <input type="text" name="tax_id" required placeholder="Tax ID">
        </div>

        <div class="form-group">
            <label>Address</label>
            <input type="text" name="property_address" required placeholder="Address">
        </div>
        
        <div class="form-group">
            <label>Price</label>
            <input type="number" name="price" required min="0" step="0.01" placeholder="Enter property price">
            <small class="help-text">Enter price in dollars</small>
        </div>

      <div class="form-group">
          <label>Status</label>
          <select name="status" required class="form-select">
              <option value="">Select status</option>
              <option value="For Sale">For Sale</option>
              <option value="For Lease">For Lease</option>
              <option value="Sold">Sold</option>
              <option value="Leased">Leased</option>
          </select>
      </div>

        <div class="form-group">
            <label>Property Type</label>
            <select name="property_type" required id="propertyType" onchange="togglePropertyTypeFields()">
                <option value="">Select Property Type</option>
                <option value="RESIDENTIAL">Residential</option>
                <option value="COMMERCIAL">Commercial</option>
            </select>
        </div>
    </div>
</div>

<!-- Residential Fields -->
<div id="residentialFields" class="form-section hidden">
    <div class="form-header">Residential Details</div>
    <div class="form-grid">
        <div class="form-group">
            <label>Bedrooms</label>
            <input type="number" name="bedrooms" min="0" placeholder="Number of Bedrooms">
        </div>
        <div class="form-group">
            <label>Bathrooms</label>
            <input type="number" name="bathrooms" min="0" step="0.5" placeholder="Number of Bathrooms">
        </div>
        <div class="form-group">
            <label>Residential Type</label>
            <input type="text" name="r_type" placeholder="Residential Type">
        </div>
        <div class="form-group">
            <label>Square Feet</label>
            <input type="number" name="square_feet" min="0" placeholder="Square Feet">
        </div>
        <div class="form-group">
            <label>Garage Spaces</label>
            <input type="number" name="garage_spaces" min="0" placeholder="Garage Spaces">
        </div>
        <div class="form-group">
            <label>Has Basement?</label>
            <input type="checkbox" name="has_basement">
        </div>
        <div class="form-group">
            <label>Has Pool?</label>
            <input type="checkbox" name="has_pool">
        </div>
    </div>
</div>

<!-- Commercial Fields -->
<div id="commercialFields" class="form-section hidden">
    <div class="form-header">Commercial Details</div>
    <div class="form-grid">
        <div class="form-group">
            <label>Square Feet</label>
            <input type="number" name="sqft" min="0" placeholder="Square Feet">
        </div>
        <div class="form-group">
            <label>Industry</label>
            <input type="text" name="industry" placeholder="Industry">
        </div>
        <div class="form-group">
            <label>Commercial Type</label>
            <input type="text" name="c_type" placeholder="Commercial Type">
        </div>
        <div class="form-group">
            <label>Number of Units</label>
            <input type="number" name="num_units" min="0" placeholder="Number of Units">
        </div>
        <div class="form-group">
            <label>Parking Spaces</label>
            <input type="number" name="parking_spaces" min="0" placeholder="Parking Spaces">
        </div>
        <div class="form-group">
            <label>Zoning Type</label>
            <input type="text" name="zoning_type" placeholder="Zoning Type">
        </div>
    </div>
</div>

<!-- JavaScript for Field Toggling -->
<script>
    function togglePropertyTypeFields() {
        const propertyType = document.getElementById("propertyType").value;
        const residentialFields = document.getElementById("residentialFields");
        const commercialFields = document.getElementById("commercialFields");

        // Show relevant fields based on property type
        if (propertyType === "RESIDENTIAL") {
            residentialFields.classList.remove("hidden");
            commercialFields.classList.add("hidden");
        } else if (propertyType === "COMMERCIAL") {
            residentialFields.classList.add("hidden");
            commercialFields.classList.remove("hidden");
        } else {
            residentialFields.classList.add("hidden");
            commercialFields.classList.add("hidden");
        }
    }
</script>

<style>
    .hidden {
        display: none;
    }
</style>
